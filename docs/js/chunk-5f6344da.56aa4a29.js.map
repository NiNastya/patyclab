{"version":3,"sources":["webpack:///./src/views/Survey.vue?1020","webpack:///./src/api/questionnaire.js","webpack:///src/views/Survey.vue","webpack:///./src/views/Survey.vue?ffac","webpack:///./src/views/Survey.vue","webpack:///./node_modules/core-js/internals/create-html.js","webpack:///./node_modules/core-js/modules/es.string.link.js","webpack:///./node_modules/core-js/internals/string-html-forced.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","survey","attrs","getImage","start_banner","_e","_v","_s","start_title","start_description","on","showQuestion","progress","question","length","domProps","banner","label","description","_l","item","index","key","class","active","getActive","$event","selectedItem","selected","nextPage","end_banner","end_title","end_description","finishedSurvey","false_banner_","false_title","false_description","$t","staticRenderFns","getQuestionnaire","id","axiosOriginal","get","response","data","questionnairesCheckUser","body","post","questionnairesEndTest","questionnaireResponse","name","slugs","slug","selectedList","isShowPreview","isShowQuestion","isShowEnd","isShowFalse","isShowSucces","error","isManyAnswers","user","mounted","routePath","$route","query","q","card","phone","test","res","isTest","$router","push","watch","handler","window","deep","methods","showEnd","showFalse","test_id","question_id","questionnaire","find","findIndex","image","urlImg","$helpers","getAbsolutePath","mani_answers","splice","end","alert","component","uncurryThis","requireObjectCoercible","toString","quot","replace","module","exports","string","tag","attribute","value","S","p1","$","createHTML","forcedStringHTMLMethod","target","proto","forced","link","url","fails","METHOD_NAME","toLowerCase","split"],"mappings":"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","file":"js/chunk-5f6344da.56aa4a29.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.survey)?_c('main',{staticClass:\"survey\"},[(_vm.isShowPreview)?_c('div',{staticClass:\"survey__preview\"},[_c('div',{staticClass:\"survey__banner\"},[(_vm.survey.start_banner)?_c('img',{attrs:{\"src\":_vm.getImage(_vm.survey.start_banner),\"alt\":\"\"}}):_vm._e()]),_c('div',{staticClass:\"survey__title\"},[_vm._v(_vm._s(_vm.survey.start_title))]),_c('div',{staticClass:\"survey__preview-text\"},[_vm._v(\" \"+_vm._s(_vm.survey.start_description)+\" \")]),_c('div',{staticClass:\"survey__preview-btn survey__btn\",on:{\"click\":_vm.showQuestion}},[_vm._v(\" Вперёд \")])]):_vm._e(),(_vm.isShowQuestion)?_c('div',{staticClass:\"survey__main\"},[_c('div',{staticClass:\"survey__progress\"},[_c('div',{staticClass:\"survey__progress-top\"},[_c('p',{staticClass:\"survey__progress-pagination\"},[_vm._v(_vm._s(_vm.progress)+\"/\"+_vm._s(_vm.survey.question.length))]),(_vm.error)?_c('p',{staticClass:\"survey__error\"},[_vm._v(\" ! Вы не ответили на данный вопрос \")]):_vm._e()]),_c('progress',{attrs:{\"id\":\"progress-bar\",\"max\":_vm.survey.question.length},domProps:{\"value\":_vm.progress}})]),(_vm.survey.question[_vm.progress - 1])?_c('div',{staticClass:\"survey__content\"},[_c('div',{staticClass:\"survey__banner\"},[_c('img',{attrs:{\"src\":_vm.getImage(_vm.survey.question[_vm.progress - 1].banner),\"alt\":\"\"}})]),_c('div',{staticClass:\"survey__title\"},[_vm._v(\" \"+_vm._s(_vm.survey.question[_vm.progress - 1].label)+\" \")]),_c('div',{staticClass:\"survey__text\"},[_vm._v(\" \"+_vm._s(_vm.survey.question[_vm.progress - 1].description)+\" \")]),_c('form',{staticClass:\"survey__form\"},_vm._l((_vm.survey.question[_vm.progress - 1].answers),function(item,index){return _c('div',{key:index,staticClass:\"survey__select\",class:{ active: _vm.getActive(item) },on:{\"click\":function($event){return _vm.selectedItem(_vm.survey.question[_vm.progress - 1], item)}}},[_c('div',{staticClass:\"survey__select-text\"},[_vm._v(_vm._s(item.label))]),_c('div',{staticClass:\"survey__select-checkbox\"})])}),0)]):_vm._e(),_c('div',{staticClass:\"survey__next\",class:{ active: _vm.selected },on:{\"click\":_vm.nextPage}},[_vm._v(\" Далее \")])]):_vm._e(),(_vm.isShowEnd)?_c('div',{staticClass:\"survey__preview\"},[_c('div',{staticClass:\"survey__banner\"},[(_vm.survey.start_banner)?_c('img',{attrs:{\"src\":_vm.getImage(_vm.survey.end_banner),\"alt\":\"\"}}):_vm._e()]),_c('div',{staticClass:\"survey__title\"},[_vm._v(_vm._s(_vm.survey.end_title))]),_c('div',{staticClass:\"survey__preview-text\"},[_vm._v(\" \"+_vm._s(_vm.survey.end_description)+\" \")]),_c('div',{staticClass:\"survey__preview-btn survey__btn\",on:{\"click\":_vm.finishedSurvey}},[_vm._v(\" Вперёд \")])]):_vm._e(),(_vm.isShowFalse)?_c('div',{staticClass:\"survey__preview\"},[_c('div',{staticClass:\"survey__banner\"},[(_vm.survey.false_banner_)?_c('img',{attrs:{\"src\":_vm.getImage(_vm.survey.false_banner_),\"alt\":\"\"}}):_vm._e()]),_c('div',{staticClass:\"survey__title\"},[_vm._v(_vm._s(_vm.survey.false_title))]),_c('div',{staticClass:\"survey__preview-text\"},[_vm._v(\" \"+_vm._s(_vm.survey.false_description)+\" \")])]):_vm._e(),(_vm.isShowSucces)?_c('div',{staticClass:\"survey__preview\"},[_c('div',{staticClass:\"survey__banner\"},[(_vm.survey.false_banner_)?_c('img',{attrs:{\"src\":_vm.getImage(_vm.survey.false_banner_),\"alt\":\"\"}}):_vm._e()]),_c('div',{staticClass:\"survey__title\"},[_vm._v(_vm._s(_vm.$t(\"survey.title\")))]),_c('div',{staticClass:\"survey__preview-text\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"survey.text\"))+\" \")]),_c('locale-router-link',{staticClass:\"survey__preview-btn survey__btn\",attrs:{\"to\":\"/\",\"tag\":\"div\"}},[_vm._v(\" \"+_vm._s(_vm.$t(\"survey.button\"))+\" \")])],1):_vm._e()]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axiosOriginal from \"@/plugins/axiosUninterseptor\"\n\nexport const getQuestionnaire = async (id) => {\n    const response = await axiosOriginal.get(`questionnaires-new/${id}`)\n    return response?.data\n}\n\nexport const questionnairesCheckUser = async (body) => {\n    const response = await axiosOriginal.post(`questionnaires_check_user`, body)\n    return response?.data\n}\n\nexport const questionnairesEndTest = async (body) => {\n    const response = await axiosOriginal.post(`questionnaires_end_test`, body)\n    return response?.data\n}\n\n\n\nexport const questionnaireResponse = async (body) => {\n    const response = await axiosOriginal.post(`questionnaire-response`, body)\n    return response?.data\n}\n  ","<template>\n  <main\n    v-if=\"survey\"\n    class=\"survey\"\n  >\n    <div\n      v-if=\"isShowPreview\"\n      class=\"survey__preview\"\n    >\n      <div class=\"survey__banner\">\n        <img\n          v-if=\"survey.start_banner\"\n          :src=\"getImage(survey.start_banner)\"\n          alt=\"\"\n        />\n      </div>\n      <div class=\"survey__title\">{{ survey.start_title }}</div>\n      <div class=\"survey__preview-text\">\n        {{ survey.start_description }}\n      </div>\n      <div\n        class=\"survey__preview-btn survey__btn\"\n        @click=\"showQuestion\"\n      >\n        Вперёд\n      </div>\n    </div>\n    <div\n      v-if=\"isShowQuestion\"\n      class=\"survey__main\"\n    >\n      <div class=\"survey__progress\">\n        <div class=\"survey__progress-top\">\n          <p class=\"survey__progress-pagination\">{{ progress }}/{{ survey.question.length }}</p>\n          <p\n            v-if=\"error\"\n            class=\"survey__error\"\n          >\n            ! Вы не ответили на данный вопрос\n          </p>\n        </div>\n        <progress\n          id=\"progress-bar\"\n          :value=\"progress\"\n          :max=\"survey.question.length\"\n        ></progress>\n      </div>\n      <div\n        v-if=\"survey.question[progress - 1]\"\n        class=\"survey__content\"\n      >\n        <div class=\"survey__banner\">\n          <img\n            :src=\"getImage(survey.question[progress - 1].banner)\"\n            alt=\"\"\n          />\n        </div>\n        <div class=\"survey__title\">\n          {{ survey.question[progress - 1].label }}\n        </div>\n        <div class=\"survey__text\">\n          {{ survey.question[progress - 1].description }}\n        </div>\n        <form class=\"survey__form\">\n          <div\n            v-for=\"(item, index) in survey.question[progress - 1].answers\"\n            :key=\"index\"\n            class=\"survey__select\"\n            :class=\"{ active: getActive(item) }\"\n            @click=\"selectedItem(survey.question[progress - 1], item)\"\n          >\n            <div class=\"survey__select-text\">{{ item.label }}</div>\n            <div class=\"survey__select-checkbox\"></div>\n          </div>\n        </form>\n      </div>\n      <div\n        class=\"survey__next\"\n        :class=\"{ active: selected }\"\n        @click=\"nextPage\"\n      >\n        Далее\n      </div>\n    </div>\n    <div\n      v-if=\"isShowEnd\"\n      class=\"survey__preview\"\n    >\n      <div class=\"survey__banner\">\n        <img\n          v-if=\"survey.start_banner\"\n          :src=\"getImage(survey.end_banner)\"\n          alt=\"\"\n        />\n      </div>\n      <div class=\"survey__title\">{{ survey.end_title }}</div>\n      <div class=\"survey__preview-text\">\n        {{ survey.end_description }}\n      </div>\n      <div\n        class=\"survey__preview-btn survey__btn\"\n        @click=\"finishedSurvey\"\n      >\n        Вперёд\n      </div>\n    </div>\n    <div\n      v-if=\"isShowFalse\"\n      class=\"survey__preview\"\n    >\n      <div class=\"survey__banner\">\n        <img\n          v-if=\"survey.false_banner_\"\n          :src=\"getImage(survey.false_banner_)\"\n          alt=\"\"\n        />\n      </div>\n      <div class=\"survey__title\">{{ survey.false_title }}</div>\n      <div class=\"survey__preview-text\">\n        {{ survey.false_description }}\n      </div>\n    </div>\n    <div\n      v-if=\"isShowSucces\"\n      class=\"survey__preview\"\n    >\n      <div class=\"survey__banner\">\n        <img\n          v-if=\"survey.false_banner_\"\n          :src=\"getImage(survey.false_banner_)\"\n          alt=\"\"\n        />\n      </div>\n      <div class=\"survey__title\">{{ $t(\"survey.title\") }}</div>\n      <div class=\"survey__preview-text\">\n        {{ $t(\"survey.text\") }}\n      </div>\n      <locale-router-link\n        to=\"/\"\n        tag=\"div\"\n        class=\"survey__preview-btn survey__btn\"\n      >\n        {{ $t(\"survey.button\") }}\n      </locale-router-link>\n    </div>\n  </main>\n</template>\n\n<script>\nimport {\n  getQuestionnaire,\n  questionnairesCheckUser,\n  questionnairesEndTest,\n  questionnaireResponse,\n} from \"@/api/questionnaire\"\nexport default {\n  name: \"surveyPage\",\n  data() {\n    return {\n      slugs: [\n        {\n          slug: \"pmk\",\n          id: 1,\n        },\n      ],\n      progress: 1,\n      selected: null,\n      selectedList: [],\n      isShowPreview: true,\n      isShowQuestion: false,\n      isShowEnd: false,\n      isShowFalse: false,\n      isShowSucces: false,\n      survey: null,\n      error: false,\n      isManyAnswers: false,\n      user: null,\n    }\n  },\n  mounted() {\n    let routePath = this.$route.path.split(\"-\")\n    if (routePath.length >= 2) {\n      let id = this.slugs.find((e) => e.slug == routePath[1]).id\n      getQuestionnaire(id).then((res) => {\n        this.survey = res\n      })\n    } else {\n      getQuestionnaire(1).then((res) => {\n        this.survey = res\n      })\n    }\n\n    if (this.$route.query.q) {\n      let q = this.$route.query.q.split(\" \")\n      this.user = {\n        card: q[0],\n        phone: q[1],\n        test: 1,\n      }\n      questionnairesCheckUser(this.user).then((res) => {\n        if (!res.isTest) {\n          this.isShowPreview = false\n          this.isShowSucces = true\n        }\n      })\n    } else {\n      this.$router.push(\"/\")\n    }\n  },\n  watch: {\n    progress: {\n      handler() {\n        this.error = false\n        window.scrollTo(0, 0, \"smooth\")\n      },\n    },\n    selected: {\n      deep: true,\n      handler() {\n        this.error = false\n      },\n    },\n    \"selectedList.length\": {\n      handler() {\n        this.error = false\n      },\n    },\n  },\n  methods: {\n    showQuestion() {\n      this.isShowPreview = false\n      this.isShowQuestion = true\n    },\n    showEnd() {\n      this.isShowQuestion = false\n      this.isShowEnd = true\n    },\n    showFalse() {\n      this.isShowQuestion = false\n      this.isShowFalse = true\n    },\n    nextPage() {\n      if (this.isManyAnswers ? !this.selectedList.length : !this.selected) {\n        this.error = true\n        window.scrollTo(0, 0, \"smooth\")\n        return\n      }\n      let questionnaire = {\n        phone: this.user?.phone,\n        card: this.user?.card,\n        test_id: 1,\n        question_id: this.survey.question[this.progress - 1].id,\n      }\n\n      if (this.isManyAnswers) {\n        questionnaire.answers = this.selectedList.map((e) => e.label)\n        questionnaireResponse(questionnaire)\n        if (this.selectedList.length === 1 && this.selectedList.find((e) => e.label === \"Сигареты\")) {\n          this.progress = this.selectedList.find((e) => e.label === \"Сигареты\")?.next_order\n        } else {\n          this.progress = this.selectedList.filter((e) => e.label !== \"Сигареты\")[0]?.next_order\n        }\n        this.selectedList = []\n        this.isManyAnswers = false\n      } else {\n        questionnaire.answers = this.selected.label\n        questionnaireResponse(questionnaire)\n        if (this.selected?.end) {\n          this.selected = null\n          if (this.progress == 1 || this.progress == 2) {\n            this.showFalse()\n            return\n          }\n          this.showEnd()\n          return\n        }\n\n        if (this.selected?.next_order) {\n          if (this.survey.question.findIndex((e) => e.order_id === this.selected.next_order)) {\n            this.progress =\n              this.survey.question.findIndex((e) => e.order_id === this.selected.next_order) + 1\n          }\n          this.selected = null\n          return\n        }\n        if (this.progress != 7) {\n          this.progress++\n        } else {\n          this.showEnd()\n        }\n      }\n\n      this.selected = null\n      this.selectedList = []\n      this.isManyAnswers = false\n    },\n    getImage(image) {\n      const urlImg = image\n      if (urlImg) {\n        return this.$helpers.getAbsolutePath(urlImg)\n      }\n    },\n    getActive(item) {\n      if (this.isManyAnswers) {\n        return this.selectedList.findIndex((e) => e.id === item.id) != -1 ? true : false\n      } else {\n        return this.selected ? item.id == this.selected.id : false\n      }\n    },\n    selectedItem(survey, item) {\n      if (survey.mani_answers) {\n        this.isManyAnswers = true\n        // if (\n        //   this.selectedList.length &&\n        //   this.selectedList.find((e) => e.next_order !== item.next_order)\n        // ) {\n        //   this.selectedList = []\n        // }\n        if (this.selectedList.findIndex((e) => e.id === item.id) == -1) {\n          this.selectedList.push(item)\n        } else {\n          this.selectedList.splice(\n            this.selectedList.findIndex((e) => e.id === item.id),\n            1,\n          )\n        }\n        return\n      }\n      if (this.selected?.id === item.id) {\n        this.selected = null\n      } else {\n        this.selected = item\n      }\n    },\n\n    finishedSurvey() {\n      questionnairesEndTest(this.user).then((res) => {\n        if (res.end) {\n          window.location.href = this.survey.link\n          return\n        }\n        if (res.error) {\n          alert(res.error)\n        }\n      })\n    },\n  },\n}\n</script>\n\n<style\n  lang=\"scss\"\n  scoped\n></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Survey.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Survey.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Survey.vue?vue&type=template&id=2fe6774c&scoped=true&\"\nimport script from \"./Survey.vue?vue&type=script&lang=js&\"\nexport * from \"./Survey.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fe6774c\",\n  null\n  \n)\n\nexport default component.exports","var uncurryThis = require('../internals/function-uncurry-this');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toString = require('../internals/to-string');\n\nvar quot = /\"/g;\nvar replace = uncurryThis(''.replace);\n\n// `CreateHTML` abstract operation\n// https://tc39.es/ecma262/#sec-createhtml\nmodule.exports = function (string, tag, attribute, value) {\n  var S = toString(requireObjectCoercible(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + replace(toString(value), quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.link` method\n// https://tc39.es/ecma262/#sec-string.prototype.link\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('link') }, {\n  link: function link(url) {\n    return createHTML(this, 'a', 'href', url);\n  }\n});\n","var fails = require('../internals/fails');\n\n// check the existence of a method, lowercase\n// of a tag and escaping quotes in arguments\nmodule.exports = function (METHOD_NAME) {\n  return fails(function () {\n    var test = ''[METHOD_NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  });\n};\n"],"sourceRoot":""}