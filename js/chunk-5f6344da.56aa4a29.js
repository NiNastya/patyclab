(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f6344da"],{"57e1":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.survey?t("main",{staticClass:"survey"},[e.isShowPreview?t("div",{staticClass:"survey__preview"},[t("div",{staticClass:"survey__banner"},[e.survey.start_banner?t("img",{attrs:{src:e.getImage(e.survey.start_banner),alt:""}}):e._e()]),t("div",{staticClass:"survey__title"},[e._v(e._s(e.survey.start_title))]),t("div",{staticClass:"survey__preview-text"},[e._v(" "+e._s(e.survey.start_description)+" ")]),t("div",{staticClass:"survey__preview-btn survey__btn",on:{click:e.showQuestion}},[e._v(" Вперёд ")])]):e._e(),e.isShowQuestion?t("div",{staticClass:"survey__main"},[t("div",{staticClass:"survey__progress"},[t("div",{staticClass:"survey__progress-top"},[t("p",{staticClass:"survey__progress-pagination"},[e._v(e._s(e.progress)+"/"+e._s(e.survey.question.length))]),e.error?t("p",{staticClass:"survey__error"},[e._v(" ! Вы не ответили на данный вопрос ")]):e._e()]),t("progress",{attrs:{id:"progress-bar",max:e.survey.question.length},domProps:{value:e.progress}})]),e.survey.question[e.progress-1]?t("div",{staticClass:"survey__content"},[t("div",{staticClass:"survey__banner"},[t("img",{attrs:{src:e.getImage(e.survey.question[e.progress-1].banner),alt:""}})]),t("div",{staticClass:"survey__title"},[e._v(" "+e._s(e.survey.question[e.progress-1].label)+" ")]),t("div",{staticClass:"survey__text"},[e._v(" "+e._s(e.survey.question[e.progress-1].description)+" ")]),t("form",{staticClass:"survey__form"},e._l(e.survey.question[e.progress-1].answers,(function(s,r){return t("div",{key:r,staticClass:"survey__select",class:{active:e.getActive(s)},on:{click:function(t){return e.selectedItem(e.survey.question[e.progress-1],s)}}},[t("div",{staticClass:"survey__select-text"},[e._v(e._s(s.label))]),t("div",{staticClass:"survey__select-checkbox"})])})),0)]):e._e(),t("div",{staticClass:"survey__next",class:{active:e.selected},on:{click:e.nextPage}},[e._v(" Далее ")])]):e._e(),e.isShowEnd?t("div",{staticClass:"survey__preview"},[t("div",{staticClass:"survey__banner"},[e.survey.start_banner?t("img",{attrs:{src:e.getImage(e.survey.end_banner),alt:""}}):e._e()]),t("div",{staticClass:"survey__title"},[e._v(e._s(e.survey.end_title))]),t("div",{staticClass:"survey__preview-text"},[e._v(" "+e._s(e.survey.end_description)+" ")]),t("div",{staticClass:"survey__preview-btn survey__btn",on:{click:e.finishedSurvey}},[e._v(" Вперёд ")])]):e._e(),e.isShowFalse?t("div",{staticClass:"survey__preview"},[t("div",{staticClass:"survey__banner"},[e.survey.false_banner_?t("img",{attrs:{src:e.getImage(e.survey.false_banner_),alt:""}}):e._e()]),t("div",{staticClass:"survey__title"},[e._v(e._s(e.survey.false_title))]),t("div",{staticClass:"survey__preview-text"},[e._v(" "+e._s(e.survey.false_description)+" ")])]):e._e(),e.isShowSucces?t("div",{staticClass:"survey__preview"},[t("div",{staticClass:"survey__banner"},[e.survey.false_banner_?t("img",{attrs:{src:e.getImage(e.survey.false_banner_),alt:""}}):e._e()]),t("div",{staticClass:"survey__title"},[e._v(e._s(e.$t("survey.title")))]),t("div",{staticClass:"survey__preview-text"},[e._v(" "+e._s(e.$t("survey.text"))+" ")]),t("locale-router-link",{staticClass:"survey__preview-btn survey__btn",attrs:{to:"/",tag:"div"}},[e._v(" "+e._s(e.$t("survey.button"))+" ")])],1):e._e()]):e._e()},i=[],n=(t("ac1f"),t("1276"),t("7db0"),t("d3b7"),t("d81d"),t("4de4"),t("c740"),t("a434"),t("9911"),t("1da1")),a=(t("96cf"),t("7fe7")),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].get("questionnaires-new/".concat(s));case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("questionnaires_check_user",s);case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),c=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("questionnaires_end_test",s);case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(s){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].post("questionnaire-response",s);case 2:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.data);case 4:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),v={name:"surveyPage",data:function(){return{slugs:[{slug:"pmk",id:1}],progress:1,selected:null,selectedList:[],isShowPreview:!0,isShowQuestion:!1,isShowEnd:!1,isShowFalse:!1,isShowSucces:!1,survey:null,error:!1,isManyAnswers:!1,user:null}},mounted:function(){var e=this,s=this.$route.path.split("-");if(s.length>=2){var t=this.slugs.find((function(e){return e.slug==s[1]})).id;u(t).then((function(s){e.survey=s}))}else u(1).then((function(s){e.survey=s}));if(this.$route.query.q){var r=this.$route.query.q.split(" ");this.user={card:r[0],phone:r[1],test:1},o(this.user).then((function(s){s.isTest||(e.isShowPreview=!1,e.isShowSucces=!0)}))}else this.$router.push("/")},watch:{progress:{handler:function(){this.error=!1,window.scrollTo(0,0,"smooth")}},selected:{deep:!0,handler:function(){this.error=!1}},"selectedList.length":{handler:function(){this.error=!1}}},methods:{showQuestion:function(){this.isShowPreview=!1,this.isShowQuestion=!0},showEnd:function(){this.isShowQuestion=!1,this.isShowEnd=!0},showFalse:function(){this.isShowQuestion=!1,this.isShowFalse=!0},nextPage:function(){var e,s,t=this;if(this.isManyAnswers?!this.selectedList.length:!this.selected)return this.error=!0,void window.scrollTo(0,0,"smooth");var r={phone:null===(e=this.user)||void 0===e?void 0:e.phone,card:null===(s=this.user)||void 0===s?void 0:s.card,test_id:1,question_id:this.survey.question[this.progress-1].id};if(this.isManyAnswers){var i,n;if(r.answers=this.selectedList.map((function(e){return e.label})),l(r),1===this.selectedList.length&&this.selectedList.find((function(e){return"Сигареты"===e.label})))this.progress=null===(i=this.selectedList.find((function(e){return"Сигареты"===e.label})))||void 0===i?void 0:i.next_order;else this.progress=null===(n=this.selectedList.filter((function(e){return"Сигареты"!==e.label}))[0])||void 0===n?void 0:n.next_order;this.selectedList=[],this.isManyAnswers=!1}else{var a,u;if(r.answers=this.selected.label,l(r),null!==(a=this.selected)&&void 0!==a&&a.end)return this.selected=null,1==this.progress||2==this.progress?void this.showFalse():void this.showEnd();if(null!==(u=this.selected)&&void 0!==u&&u.next_order)return this.survey.question.findIndex((function(e){return e.order_id===t.selected.next_order}))&&(this.progress=this.survey.question.findIndex((function(e){return e.order_id===t.selected.next_order}))+1),void(this.selected=null);7!=this.progress?this.progress++:this.showEnd()}this.selected=null,this.selectedList=[],this.isManyAnswers=!1},getImage:function(e){var s=e;if(s)return this.$helpers.getAbsolutePath(s)},getActive:function(e){return this.isManyAnswers?-1!=this.selectedList.findIndex((function(s){return s.id===e.id})):!!this.selected&&e.id==this.selected.id},selectedItem:function(e,s){var t;if(e.mani_answers)return this.isManyAnswers=!0,void(-1==this.selectedList.findIndex((function(e){return e.id===s.id}))?this.selectedList.push(s):this.selectedList.splice(this.selectedList.findIndex((function(e){return e.id===s.id})),1));(null===(t=this.selected)||void 0===t?void 0:t.id)===s.id?this.selected=null:this.selected=s},finishedSurvey:function(){var e=this;c(this.user).then((function(s){s.end?window.location.href=e.survey.link:s.error&&alert(s.error)}))}}},d=v,_=t("2877"),h=Object(_["a"])(d,r,i,!1,null,"2fe6774c",null);s["default"]=h.exports},"857a":function(e,s,t){var r=t("e330"),i=t("1d80"),n=t("577e"),a=/"/g,u=r("".replace);e.exports=function(e,s,t,r){var o=n(i(e)),c="<"+s;return""!==t&&(c+=" "+t+'="'+u(n(r),a,"&quot;")+'"'),c+">"+o+"</"+s+">"}},9911:function(e,s,t){"use strict";var r=t("23e7"),i=t("857a"),n=t("af03");r({target:"String",proto:!0,forced:n("link")},{link:function(e){return i(this,"a","href",e)}})},af03:function(e,s,t){var r=t("d039");e.exports=function(e){return r((function(){var s=""[e]('"');return s!==s.toLowerCase()||s.split('"').length>3}))}}}]);
//# sourceMappingURL=chunk-5f6344da.56aa4a29.js.map