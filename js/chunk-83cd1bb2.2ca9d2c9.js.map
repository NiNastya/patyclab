{"version":3,"sources":["webpack:///./src/api/search.js","webpack:///./src/assets/icons/x-circle.svg","webpack:///./src/components/common/MobileSearch.vue?0834","webpack:///src/components/common/MobileSearch.vue","webpack:///./src/components/common/MobileSearch.vue?4b60","webpack:///./src/components/common/MobileSearch.vue","webpack:///./src/components/common/MobileSearch.vue?2e05","webpack:///./src/assets/img/header-menu/down.svg"],"names":["getSearchResults","cityId","term","pagination","queryPopulate","field","localStorage","key","getItem","JSON","parse","id","populate","image","localizations","filters","$and","$containsi","query","qs","stringify","page","pageSize","encodeValuesOnly","axios","get","response","data","module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","searchGo","apply","arguments","directives","name","rawName","value","expression","attrs","$t","domProps","removeClass","target","composing","searchItem","length","staticStyle","cleanSearch","_e","_v","goToProduct","countProducts","_l","product","category","index","isOpen","_s","label","class","rotata","list","mutateModal","item","getQuery","staticRenderFns","menu","isLoading","menuAttributes","type","components","ProductCard","computed","mapState","products","meta","watch","deep","handler","isSearchingOpen","closeMenu","categoriesFiltered","forEach","find","atr","Array","e","push","methods","mapMutations","modalSearching","mapActions","actionLoadProductsSuccess","console","element","document","getElementById","loadProductsBySearch","then","res","isPaginate","catch","component"],"mappings":"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","file":"js/chunk-83cd1bb2.2ca9d2c9.js","sourcesContent":["import axios from \"@/plugins/axios\"\nimport qs from \"qs\"\nexport const getSearchResults = async ({ term, pagination }, cityId) => {\n  let queryPopulate = {}\n  let field = \"name\"\n  if (!cityId) {\n    cityId =\n      localStorage.key(\"selectCity\") && localStorage.getItem(\"selectCity\") !== \"undefined\"\n        ? JSON.parse(localStorage.getItem(\"selectCity\"))?.id\n        : 2\n  }\n  field = \"name\"\n  queryPopulate = {\n    populate: {\n      image: \"*\",\n      localizations: \"*\",\n    },\n    filters: {\n      $and: [\n        {\n          [field]: {\n            $containsi: term,\n          },\n        },\n      ],\n    },\n  }\n\n  const query = qs.stringify(\n    {\n      pagination: {\n        page: pagination?.page || 1,\n        pageSize: pagination?.pageSize || 1500,\n      },\n      ...queryPopulate,\n    },\n    {\n      encodeValuesOnly: true,\n    },\n  )\n\n  const response = await axios.get(`/products?${query}`)\n  return response?.data\n}\n","module.exports = __webpack_public_path__ + \"img/x-circle.8d2f0c3a.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isSearchingOpen)?_c('div',{staticClass:\"mobile__search\"},[_c('div',{staticClass:\"container\"},[_c('form',{staticClass:\"header__search\",on:{\"submit\":function($event){$event.preventDefault();return _vm.searchGo.apply(null, arguments)}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchItem),expression:\"searchItem\"}],staticClass:\"header__search-input\",attrs:{\"type\":\"text\",\"placeholder\":_vm.$t('find')},domProps:{\"value\":(_vm.searchItem)},on:{\"click\":_vm.removeClass,\"input\":function($event){if($event.target.composing){ return; }_vm.searchItem=$event.target.value}}}),(_vm.searchItem.length > 0)?_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\"},on:{\"click\":_vm.cleanSearch}},[_c('img',{attrs:{\"src\":require(\"@/assets/icons/x-circle.svg\"),\"alt\":\"\"}})]):_vm._e(),(_vm.searchItem.length > 0)?_c('button',{staticClass:\"header__search-btn\",staticStyle:{\"font-size\":\"14px\",\"color\":\"#000000\",\"font-family\":\"'CeraPro Medium'\"}},[_vm._v(\" найти \")]):_c('button',{staticClass:\"header__search-btn\"},[_c('img',{staticClass:\"header__search-img\",attrs:{\"src\":require(\"@/assets/img/icons/search-icon.svg\"),\"alt\":\"\"}})])]),_c('div',{on:{\"click\":_vm.goToProduct}},[(_vm.countProducts && _vm.searchItem.length > 0)?_vm._l((_vm.products),function(product){return _c('product-card',{key:product.id,attrs:{\"item\":product}})}):_c('div',{staticClass:\"invisible__text\",staticStyle:{\"color\":\"#999999\",\"margin-top\":\"18px\",\"font-family\":\"'CeraPro Medium'\"},attrs:{\"id\":\"nothing__text\"}},[_vm._v(\" По вашему запросу ничего не найдено \")]),(_vm.isLoading)?_c('div',{staticClass:\"loading\"},[_c('div',{staticClass:\"loader\"})]):_vm._e()],2),_c('div',{staticClass:\"header-menu-mobile__accordions\"},_vm._l((_vm.menu),function(category,index){return _c('div',{key:index,staticClass:\"header-menu-mobile-accordion\"},[(category.data.length)?_c('h2',{staticClass:\"header-menu-mobile-accordion-title\",on:{\"click\":function($event){category.isOpen = !category.isOpen}}},[_vm._v(\" \"+_vm._s(category.category.label)+\" \"),_c('img',{class:{ rotata: category.isOpen },attrs:{\"src\":require(\"@/assets/img/header-menu/down.svg\")}})]):_vm._e(),(category.data.length && category.isOpen)?_c('div',{staticClass:\"header-menu-mobile-accordion__next\"},[_vm._l((category.data),function(list,index){return _c('div',{key:index},[(list.data.length)?_c('h2',{staticClass:\"header-menu-mobile-accordion__next-title\",on:{\"click\":function($event){list.isOpen = !list.isOpen}}},[_vm._v(\" \"+_vm._s(_vm.$t(list.label))+\" \"),_c('img',{class:{ rotata: list.isOpen },attrs:{\"src\":require(\"@/assets/img/header-menu/down.svg\")}})]):_vm._e(),(list.data.length && list.isOpen)?_c('div',{staticClass:\"header-menu-mobile-accordion__next__last\",on:{\"click\":_vm.mutateModal}},_vm._l((list.data),function(item,index){return _c('locale-router-link',{key:index,attrs:{\"tag\":\"h2\",\"to\":(\"catalog?category=\" + (category.category.id) + \"&\" + (_vm.getQuery(item)))},on:{\"click\":_vm.mutateModal}},[_vm._v(\" \"+_vm._s(item.label ? item.label : item)+\" \")])}),1):_vm._e()])}),_c('div',{on:{\"click\":_vm.mutateModal}},[_c('locale-router-link',{attrs:{\"tag\":\"p\",\"to\":(\"catalog?category=\" + (category.category.id))}},[_vm._v(\" Все \")])],1)],2):(category.data.length === 0 && category.isOpen)?_c('div',[_c('h2',{staticClass:\"header-menu-mobile-accordion__isempty\"},[_vm._v(\"В этой категории пусто\")])]):_vm._e()])}),0)])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    v-if=\"isSearchingOpen\"\n    class=\"mobile__search\"\n  >\n    <div class=\"container\">\n      <form\n        class=\"header__search\"\n        @submit.prevent=\"searchGo\"\n      >\n        <input\n          class=\"header__search-input\"\n          type=\"text\"\n          :placeholder=\"$t('find')\"\n          v-model=\"searchItem\"\n          @click=\"removeClass\"\n        />\n        <div\n          v-if=\"searchItem.length > 0\"\n          style=\"display: flex; justify-content: center\"\n          @click=\"cleanSearch\"\n        >\n          <img\n            src=\"@/assets/icons/x-circle.svg\"\n            alt=\"\"\n          />\n        </div>\n        <button\n          v-if=\"searchItem.length > 0\"\n          class=\"header__search-btn\"\n          style=\"font-size: 14px; color: #000000; font-family: 'CeraPro Medium'\"\n        >\n          найти\n        </button>\n        <button\n          v-else\n          class=\"header__search-btn\"\n        >\n          <img\n            class=\"header__search-img\"\n            src=\"@/assets/img/icons/search-icon.svg\"\n            alt=\"\"\n          />\n        </button>\n      </form>\n\n      <!-- SEARCH_RESULTS -->\n\n      <div @click=\"goToProduct\">\n        <template v-if=\"countProducts && searchItem.length > 0\">\n          <product-card\n            v-for=\"product in products\"\n            :key=\"product.id\"\n            :item=\"product\"\n          />\n        </template>\n        <div\n          v-else\n          id=\"nothing__text\"\n          class=\"invisible__text\"\n          style=\"color: #999999; margin-top: 18px; font-family: 'CeraPro Medium'\"\n        >\n          По вашему запросу ничего не найдено\n        </div>\n        <div\n          v-if=\"isLoading\"\n          class=\"loading\"\n        >\n          <div class=\"loader\"></div>\n        </div>\n      </div>\n\n      <!-- CATEGORIES -->\n      <div class=\"header-menu-mobile__accordions\">\n        <div\n          class=\"header-menu-mobile-accordion\"\n          v-for=\"(category, index) in menu\"\n          :key=\"index\"\n        >\n          <h2\n            class=\"header-menu-mobile-accordion-title\"\n            v-if=\"category.data.length\"\n            @click=\"category.isOpen = !category.isOpen\"\n          >\n            {{ category.category.label }}\n            <img\n              src=\"@/assets/img/header-menu/down.svg\"\n              :class=\"{ rotata: category.isOpen }\"\n            />\n          </h2>\n          <div\n            class=\"header-menu-mobile-accordion__next\"\n            v-if=\"category.data.length && category.isOpen\"\n          >\n            <div\n              v-for=\"(list, index) in category.data\"\n              :key=\"index\"\n            >\n              <h2\n                class=\"header-menu-mobile-accordion__next-title\"\n                @click=\"list.isOpen = !list.isOpen\"\n                v-if=\"list.data.length\"\n              >\n                {{ $t(list.label) }}\n                <img\n                  src=\"@/assets/img/header-menu/down.svg\"\n                  :class=\"{ rotata: list.isOpen }\"\n                />\n              </h2>\n              <div\n                class=\"header-menu-mobile-accordion__next__last\"\n                v-if=\"list.data.length && list.isOpen\"\n                @click=\"mutateModal\"\n              >\n                <locale-router-link\n                  tag=\"h2\"\n                  :to=\"`catalog?category=${category.category.id}&${getQuery(item)}`\"\n                  v-for=\"(item, index) in list.data\"\n                  :key=\"index\"\n                  @click=\"mutateModal\"\n                >\n                  {{ item.label ? item.label : item }}\n                </locale-router-link>\n              </div>\n            </div>\n            <div @click=\"mutateModal\">\n              <locale-router-link\n                tag=\"p\"\n                :to=\"`catalog?category=${category.category.id}`\"\n              >\n                Все\n              </locale-router-link>\n            </div>\n          </div>\n          <div v-else-if=\"category.data.length === 0 && category.isOpen\">\n            <h2 class=\"header-menu-mobile-accordion__isempty\">В этой категории пусто</h2>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations, mapActions } from \"vuex\"\nimport { mutationTypes } from \"@/store\"\nimport { actionTypes } from \"@/store/modules/catalog\"\nimport { getSearchResults } from \"@/api/search\"\n\nexport default {\n  data() {\n    return {\n      searchItem: \"\",\n      menu: [],\n      isLoading: false,\n      // notInList: true,\n      menuAttributes: [\n        {\n          type: \"countries\",\n          value: \"country\",\n          data: [],\n        },\n        {\n          type: \"sugar\",\n          value: \"sugar\",\n          data: [],\n        },\n        {\n          type: \"volume\",\n          value: \"volume\",\n          data: [],\n        },\n        {\n          type: \"strenght\",\n          value: \"strenght\",\n          data: [],\n        },\n        {\n          type: \"vinePlace\",\n          value: \"vine_place\",\n          data: [],\n        },\n      ],\n    }\n  },\n  components: {\n    ProductCard: () => import(\"@/components/products/ProductCard.vue\"),\n  },\n  computed: {\n    ...mapState([\"isSearchingOpen\"]),\n    ...mapState(\"categoriesModule\", [\"categoriesFiltered\", \"categoriesProducts\"]),\n    ...mapState(\"catalogModule\", {\n      products: \"data\",\n      meta: \"meta\",\n      isLoading: \"isLoading\",\n    }),\n    countProducts() {\n      return this.products?.length\n    },\n  },\n  watch: {\n    \"$route.path\": {\n      deep: true,\n      handler() {\n        if (this.isSearchingOpen) {\n          this.closeMenu()\n        }\n      },\n    },\n    isSearchingOpen: {\n      handler() {\n        if (this.isSearchingOpen) {\n          this.menu = []\n          this.categoriesFiltered.forEach((category) => {\n            this.categoriesProducts\n              .find((e) => e.id === category.id)\n              .data.forEach((products) => {\n                this.menuAttributes.forEach((atr) => {\n                  atr.data.push(products.attributes[atr.value])\n                })\n              })\n\n            // every category has his own menu\n            this.menu.push({\n              category: category,\n              isOpen: false,\n              data: [\n                {\n                  type: \"view\",\n                  label: \"attributes.view\",\n                  data: [],\n                  isOpen: false,\n                },\n                {\n                  type: \"countries\",\n                  label: \"attributes.country\",\n                  data: [],\n                  isOpen: false,\n                },\n                {\n                  type: \"sugar\",\n                  label: \"attributes.sugar\",\n                  data: [],\n                  isOpen: false,\n                },\n                {\n                  type: \"volume\",\n                  label: \"attributes.volume\",\n                  data: [],\n                  isOpen: false,\n                },\n                {\n                  type: \"strenght\",\n                  label: \"attributes.fortress\",\n                  data: [],\n                  isOpen: false,\n                },\n                {\n                  type: \"vinePlace\",\n                  label: \"attributes.grape\",\n                  data: [],\n                  isOpen: false,\n                },\n              ],\n            })\n\n            // sort attributes by their types\n            this.menuAttributes.forEach((atr) => {\n              this.menu\n                .find((menu) => {\n                  return menu.category.id === category.id\n                })\n                .data.find((e) => e.type === atr.type).data = Array.from(\n                new Set(atr.data.filter((element) => element != null && element != \"\")),\n              )\n            })\n\n            // clear menu attributes\n            this.menuAttributes.forEach((atr) => {\n              atr.data = []\n            })\n\n            // special sorting for view typed filter\n            category.subcategories.forEach((e) => {\n              if (e.products.length) {\n                this.menu\n                  .find((menu) => menu.category.id === category.id)\n                  .data.find((e) => e.type === \"view\")\n                  .data.push({\n                    id: e.id,\n                    label: e.label,\n                  })\n              }\n            })\n          })\n        } else {\n          this.menuAttributes.forEach((atr) => {\n            atr.data = []\n          })\n        }\n      },\n    },\n  },\n  methods: {\n    ...mapMutations({\n      modalSearching: mutationTypes.openSearchingModal,\n    }),\n    ...mapActions(\"catalogModule\", {\n      actionLoadProductsSuccess: actionTypes.actionLoadProductsSuccess,\n    }),\n    mutateModal() {\n      this.modalSearching(false)\n    },\n    cleanSearch() {\n      this.searchItem = \"\"\n    },\n    goToProduct() {\n      console.log(\"test\")\n      this.modalSearching(false)\n    },\n    removeClass() {\n      var element = document.getElementById(\"nothing__text\")\n      element.classList.remove(\"invisible__text\")\n    },\n    searchGo() {\n      if (this.searchItem.length > 0) {\n        this.loadProductsBySearch()\n      } else {\n        this.searchItem = \"\"\n      }\n    },\n    getQuery(item) {\n      if (item?.id) {\n        return `&view=${item.id}`\n      } else {\n        return `&label=${item}`\n      }\n    },\n    loadProductsBySearch() {\n      this.isLoading = true\n      getSearchResults(\n        {\n          term: this.searchItem,\n          pagination: this.pagination,\n        },\n        this.$route.query.city_id,\n      )\n        .then((res) => {\n          // res.data.forEach((element) => {\n          //   let boolExp = element.attributes.name.includes(this.searchItem)\n          //   if (boolExp == false) {\n          //     this.notInList = true\n          //   } else {\n          //     this.notInList = false\n          //   }\n          // })\n          this.actionLoadProductsSuccess({\n            res: res,\n            isPaginate: this.isPaginate,\n          })\n          this.isLoading = false\n        })\n        .catch(() => {\n          this.actionLoadProductsSuccess()\n          this.isLoading = false\n        })\n    },\n  },\n}\n</script>\n\n<style\n  lang=\"scss\"\n  scoped\n>\n.mobile__search {\n  position: fixed;\n  top: 75px;\n  width: 100%;\n  right: 0;\n  height: 100%;\n  background-color: #fefefe;\n  z-index: 1009999999999;\n  transition: 0.3s all;\n  overflow: visible;\n  overflow-y: auto;\n}\n.header__search {\n  margin-top: 14px;\n  width: 100%;\n  border: #8344d6 1px solid;\n  input {\n    color: #2d2f32;\n  }\n}\n.loading {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n.invisible__text {\n  display: none;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSearch.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSearch.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MobileSearch.vue?vue&type=template&id=18bdd497&scoped=true&\"\nimport script from \"./MobileSearch.vue?vue&type=script&lang=js&\"\nexport * from \"./MobileSearch.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MobileSearch.vue?vue&type=style&index=0&id=18bdd497&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18bdd497\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MobileSearch.vue?vue&type=style&index=0&id=18bdd497&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"img/down.6974bfc9.svg\";"],"sourceRoot":""}